{"version":3,"sources":["webpack:///./assets/js/theme/wishlist.js"],"names":["WishList","options","template","wishlistDeleteConfirm","$","on","event","confirmed","confirm","context","wishlistDelete","preventDefault","registerAddWishListValidation","$addWishlistForm","addWishlistValidator","nod","submit","add","selector","validate","cb","val","result","length","errorMessage","performCheck","areAll","wishListHandler","wishListUrl","currentTarget","href","modal","defaultModal","open","api","getPage","err","content","updateContent","wrap","$wishlistForm","$content","loaded","next","$addWishListForm","PageManager"],"mappings":";;;;;;;;;;;;;;;;;8yBAQqBA,S,yDACjB,mBAAc,0EACV,uBADU,EAGV,MAAKC,OAAL,CAAe,CACXC,SAAU,sBADC,CAAf,CAHU,YAMb,CAED;;0BAGAC,qB,iCAAwB,iBACpBC,8CAACA,CAAC,MAAF,EAAUC,EAAV,CAAa,OAAb,CAAsB,wBAAtB,CAAgD,SAACC,KAAD,CAAW,CACvD,GAAMC,WAAYC,QAAQ,OAAKC,OAAL,CAAaC,cAArB,CAAlB,CAEA,GAAIH,SAAJ,CAAe,CACX,MAAO,KACV,CAEDD,MAAMK,cAAN,EACH,CARD,CASH,C,oBAEDC,6B,wCAA8BC,gB,CAAkB,iBAC5C,KAAKC,oBAAL,CAA4BC,mFAAGA,CAAC,CAC5BC,OAAQ,qCADoB,CAAJ,CAA5B,CAIA,KAAKF,oBAAL,CAA0BG,GAA1B,CAA8B,CAC1B,CACIC,SAAU,2CADd,CAEIC,SAAU,kBAACC,EAAD,CAAKC,GAAL,CAAa,CACnB,GAAMC,QAASD,IAAIE,MAAJ,CAAa,CAA5B,CAEAH,GAAGE,MAAH,CACH,CANL,CAOIE,aAAc,iCAPlB,CAD0B,CAA9B,EAYAX,iBAAiBG,MAAjB,CAAwB,SAACV,KAAD,CAAW,CAC/B,OAAKQ,oBAAL,CAA0BW,YAA1B,GAEA,GAAI,OAAKX,oBAAL,CAA0BY,MAA1B,CAAiC,OAAjC,CAAJ,CAA+C,CAC3C,MACH,CAEDpB,MAAMK,cAAN,EACH,CARD,CASH,C,oBAEDgB,e,2BAAkB,iBACdvB,8CAACA,CAAC,MAAF,EAAUC,EAAV,CAAa,OAAb,CAAsB,iBAAtB,CAAyC,SAACC,KAAD,CAAW,CAChD,GAAMsB,aAActB,MAAMuB,aAAN,CAAoBC,IAAxC,CACA,GAAMC,OAAQC,0FAAYA,EAA1B,CAEA1B,MAAMK,cAAN,GAEAoB,MAAME,IAAN,GAEAC,uEAAGA,CAACC,OAAJ,CAAYP,WAAZ,CAAyB,OAAK3B,OAA9B,CAAuC,SAACmC,GAAD,CAAMC,OAAN,CAAkB,CACrD,GAAID,GAAJ,CAAS,CACL,MAAOL,OAAMO,aAAN,CAAoBF,GAApB,CACV,CAEDL,MAAMO,aAAN,CAAoBD,OAApB,CAA6B,CAAEE,KAAM,IAAR,CAA7B,EAEA,GAAMC,eAAgBpC,8CAACA,CAAC,gBAAF,CAAoB2B,MAAMU,QAA1B,CAAtB,CAEA,OAAK7B,6BAAL,CAAmC4B,aAAnC,CACH,CAVD,CAWH,CAnBD,CAoBH,C,oBAEDE,M,iBAAOC,I,CAAM,CACT,GAAMC,kBAAmBxC,8CAACA,CAAC,gBAAF,CAAzB,CAEA,GAAIwC,iBAAiBrB,MAArB,CAA6B,CACzB,KAAKX,6BAAL,CAAmCgC,gBAAnC,CACH,CAED,KAAKzC,qBAAL,GACA,KAAKwB,eAAL,GAEAgB,MACH,C,kBAtFiCE,8D,EAAjB7C,uE","file":"theme-bundle.chunk.0.js","sourcesContent":["import $ from 'jquery';\nimport 'foundation-sites/js/foundation/foundation';\nimport 'foundation-sites/js/foundation/foundation.reveal';\nimport nod from './common/nod';\nimport PageManager from './page-manager';\nimport { api } from '@bigcommerce/stencil-utils';\nimport { defaultModal } from './global/modal';\n\nexport default class WishList extends PageManager {\n    constructor() {\n        super();\n\n        this.options = {\n            template: 'account/add-wishlist',\n        };\n    }\n\n    /**\n     * Creates a confirm box before deleting all wish lists\n     */\n    wishlistDeleteConfirm() {\n        $('body').on('click', '[data-wishlist-delete]', (event) => {\n            const confirmed = confirm(this.context.wishlistDelete);\n\n            if (confirmed) {\n                return true;\n            }\n\n            event.preventDefault();\n        });\n    }\n\n    registerAddWishListValidation($addWishlistForm) {\n        this.addWishlistValidator = nod({\n            submit: '.wishlist-form input[type=\"submit\"]',\n        });\n\n        this.addWishlistValidator.add([\n            {\n                selector: '.wishlist-form input[name=\"wishlistname\"]',\n                validate: (cb, val) => {\n                    const result = val.length > 0;\n\n                    cb(result);\n                },\n                errorMessage: 'You must enter a wishlist name.',\n            },\n        ]);\n\n        $addWishlistForm.submit((event) => {\n            this.addWishlistValidator.performCheck();\n\n            if (this.addWishlistValidator.areAll('valid')) {\n                return;\n            }\n\n            event.preventDefault();\n        });\n    }\n\n    wishListHandler() {\n        $('body').on('click', '[data-wishlist]', (event) => {\n            const wishListUrl = event.currentTarget.href;\n            const modal = defaultModal();\n\n            event.preventDefault();\n\n            modal.open();\n\n            api.getPage(wishListUrl, this.options, (err, content) => {\n                if (err) {\n                    return modal.updateContent(err);\n                }\n\n                modal.updateContent(content, { wrap: true });\n\n                const $wishlistForm = $('.wishlist-form', modal.$content);\n\n                this.registerAddWishListValidation($wishlistForm);\n            });\n        });\n    }\n\n    loaded(next) {\n        const $addWishListForm = $('.wishlist-form');\n\n        if ($addWishListForm.length) {\n            this.registerAddWishListValidation($addWishListForm);\n        }\n\n        this.wishlistDeleteConfirm();\n        this.wishListHandler();\n\n        next();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/wishlist.js"],"sourceRoot":""}